import{j as d}from"./jsx-runtime-QvZ8i92b.js";import{r as o}from"./index-uubelm5h.js";import{u as R}from"./useWindowSize-DKtumrTx.js";const j="_masonryContainer_qjpxb_3",N="_masonryColumn_qjpxb_21",E="_masonryColumnChild_qjpxb_37",x={masonryContainer:j,masonryColumn:N,masonryColumnChild:E};function W(){const n=o.useRef(!1);return o.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),o.useCallback(()=>n.current,[])}const S={width:void 0,height:void 0};function G(n){const{ref:t,box:r="content-box"}=n,[{width:l,height:m},p]=o.useState(S),i=W(),u=o.useRef({...S}),f=o.useRef(void 0);return f.current=n.onResize,o.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const b=new ResizeObserver(([g])=>{const c=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",h=v(g,c,"inlineSize"),y=v(g,c,"blockSize");if(u.current.width!==h||u.current.height!==y){const e={width:h,height:y};u.current.width=h,u.current.height=y,f.current?f.current(e):i()&&p(e)}});return b.observe(t.current,{box:r}),()=>{b.disconnect()}},[r,t,i]),{width:l,height:m}}function v(n,t,r){return n[t]?Array.isArray(n[t])?n[t][0][r]:n[t][r]:t==="contentBoxSize"?n.contentRect[r==="inlineSize"?"width":"height"]:void 0}const q=({arrWithChildren:n,onHeightChange:t,id:r})=>{const l=o.useRef(null),{height:m=0}=G({ref:l});return o.useEffect(()=>{t(m)},[m]),d.jsx("div",{ref:l,className:x.masonryColumn,children:o.Children.map(n,(p,i)=>d.jsx("div",{className:x.masonryColumnChild,children:p},r+i))},r)};q.__docgenInfo={description:"",methods:[],displayName:"GridMasonryColumn",props:{arrWithChildren:{required:!1,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:""},onHeightChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(height: number) => void",signature:{arguments:[{type:{name:"number"},name:"height"}],return:{name:"void"}}},description:""},id:{required:!0,tsType:{name:"string"},description:""}}};const z=({children:n,gap:t,col:r,onGridMasonryLoadEnd:l})=>{const[m,p]=o.useState(0),[i]=R(),u=e=>e<767.98?r.mobile:e>=768.98&&e<1199.98?r.tablet:e>=1199.98&&e<1599.98?r.smallDesktop:e>=1599.98?r.desktop:3,[f,b]=o.useState(()=>u(i)),g=e=>Array.from({length:e}).map((a,s)=>({name:`col${s}`,arrWithElm:[],height:0})),[c,h]=o.useState(()=>g(f)),y=e=>[...e].sort((a,s)=>a.height-s.height)[0].name,M=(e,a)=>{h(c.map(s=>s.name===a?{...s,height:e}:s))};return o.useEffect(()=>{u(i)!=f&&(p(0),b(u(i)),h(g(u(i))))},[i]),o.useEffect(()=>{const e=setTimeout(()=>{if(m<n.length){const a=y(c);h(c.map(s=>s.name===a?{...s,arrWithElm:[...s.arrWithElm,n[m]]}:s)),p(s=>s+1),m==n.length-1&&l&&l(!0)}},40);return()=>clearTimeout(e)},[JSON.stringify(c.map(({height:e})=>e))]),d.jsx("div",{className:x.masonryContainer,style:{"--n23-m-fc-m":r.mobile,"--n23-m-fc-t":r.tablet,"--n23-m-fc-sd":r.smallDesktop,"--n23-m-fc-d":r.desktop,"--n23-m-fg-c":t.col,"--n23-m-fg-r":t.row},children:c.map(({arrWithElm:e,name:a})=>d.jsx(q,{arrWithChildren:e,onHeightChange:s=>M(s,a),id:a},"parent"+a))})};z.__docgenInfo={description:"",methods:[],displayName:"GridMasonry",props:{children:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:""},gap:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
	col: string;\r
	row: string;\r
}`,signature:{properties:[{key:"col",value:{name:"string",required:!0}},{key:"row",value:{name:"string",required:!0}}]}},description:""},col:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
	mobile: number;\r
	smallDesktop: number;\r
	desktop: number;\r
	tablet: number;\r
}`,signature:{properties:[{key:"mobile",value:{name:"number",required:!0}},{key:"smallDesktop",value:{name:"number",required:!0}},{key:"desktop",value:{name:"number",required:!0}},{key:"tablet",value:{name:"number",required:!0}}]}},description:""},onGridMasonryLoadEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"(isGridMasonryLoadEnd: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isGridMasonryLoadEnd"}],return:{name:"void"}}},description:""}}};const B={title:"Grid-Masonry/GridMasonry",component:z,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},O=Array.from({length:20}).map((n,t)=>d.jsx("div",{style:{background:"#"+Math.floor(Math.random()*16777215).toString(16)},children:d.jsxs(d.Fragment,{children:[d.jsx("div",{children:t}),"MSMSM SMSS".repeat(Math.floor(Math.random()*160))]})},t)),C={args:{gap:{col:"20px",row:"20px"},col:{smallDesktop:3,desktop:3,mobile:1,tablet:2},children:O}};var w,k,_;C.parameters={...C.parameters,docs:{...(w=C.parameters)==null?void 0:w.docs,source:{originalSource:`{
  args: {
    gap: {
      col: "20px",
      row: "20px"
    },
    col: {
      smallDesktop: 3,
      desktop: 3,
      mobile: 1,
      tablet: 2
    },
    children: items
  }
}`,...(_=(k=C.parameters)==null?void 0:k.docs)==null?void 0:_.source}}};const H=["GridMasonryWithDynamicColumnsBasedOnWidth"];export{C as GridMasonryWithDynamicColumnsBasedOnWidth,H as __namedExportsOrder,B as default};
