import{j as c}from"./jsx-runtime-DRTy3Uxn.js";import{r as o}from"./index-BBkUAzwr.js";import{u as q}from"./useWindowSize-BP6sRLWr.js";const R="_masonryContainer_qjpxb_3",j="_masonryColumn_qjpxb_21",N="_masonryColumnChild_qjpxb_37",x={masonryContainer:R,masonryColumn:j,masonryColumnChild:N};function E(){const n=o.useRef(!1);return o.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),o.useCallback(()=>n.current,[])}const S={width:void 0,height:void 0};function W(n){const{ref:t,box:e="content-box"}=n,[{width:d,height:l},a]=o.useState(S),u=E(),h=o.useRef({...S}),f=o.useRef(void 0);return f.current=n.onResize,o.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([m])=>{const p=e==="border-box"?"borderBoxSize":e==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",y=M(m,p,"inlineSize"),b=M(m,p,"blockSize");if(h.current.width!==y||h.current.height!==b){const i={width:y,height:b};h.current.width=y,h.current.height=b,f.current?f.current(i):u()&&a(i)}});return g.observe(t.current,{box:e}),()=>{g.disconnect()}},[e,t,u]),{width:d,height:l}}function M(n,t,e){return n[t]?Array.isArray(n[t])?n[t][0][e]:n[t][e]:t==="contentBoxSize"?n.contentRect[e==="inlineSize"?"width":"height"]:void 0}const _=({arrWithChildren:n,onHeightChange:t,id:e})=>{const d=o.useRef(null),{height:l=0}=W({ref:d});return o.useEffect(()=>{t(l)},[l]),c.jsx("div",{ref:d,className:x.masonryColumn,children:o.Children.map(n,(a,u)=>c.jsx("div",{className:x.masonryColumnChild,children:a},e+u))},e)};_.__docgenInfo={description:"",methods:[],displayName:"GridMasonryColumn",props:{arrWithChildren:{required:!1,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:""},onHeightChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(height: number) => void",signature:{arguments:[{type:{name:"number"},name:"height"}],return:{name:"void"}}},description:""},id:{required:!0,tsType:{name:"string"},description:""}}};const z=({children:n,gap:t,col:e})=>{const[d,l]=o.useState(0),[a]=q(),u=r=>r<767.98?e.mobile:r>=768.98&&r<1199.98?e.tablet:r>=1199.98&&r<1599.98?e.smallDesktop:r>=1599.98?e.desktop:3,[h,f]=o.useState(()=>u(a)),g=r=>Array.from({length:r}).map((i,s)=>({name:`col${s}`,arrWithElm:[],height:0})),[m,p]=o.useState(()=>g(h)),y=r=>[...r].sort((i,s)=>i.height-s.height)[0].name,b=(r,i)=>{p(m.map(s=>s.name===i?{...s,height:r}:s))};return o.useEffect(()=>{u(a)!=h&&(l(0),f(u(a)),p(g(u(a))))},[a]),o.useEffect(()=>{const r=setTimeout(()=>{if(d<n.length){const i=y(m);p(m.map(s=>s.name===i?{...s,arrWithElm:[...s.arrWithElm,n[d]]}:s)),l(s=>s+1)}},5);return()=>clearTimeout(r)},[JSON.stringify(m.map(({height:r})=>r))]),c.jsx("div",{className:x.masonryContainer,style:{"--n23-m-fc-m":e.mobile,"--n23-m-fc-t":e.tablet,"--n23-m-fc-sd":e.smallDesktop,"--n23-m-fc-d":e.desktop,"--n23-m-fg-c":t.col,"--n23-m-fg-r":t.row},children:m.map(({arrWithElm:r,name:i})=>c.jsx(_,{arrWithChildren:r,onHeightChange:s=>b(s,i),id:i},"parent"+i))})};z.__docgenInfo={description:"",methods:[],displayName:"GridMasonry",props:{children:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:""},gap:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
	col: string;\r
	row: string;\r
}`,signature:{properties:[{key:"col",value:{name:"string",required:!0}},{key:"row",value:{name:"string",required:!0}}]}},description:""},col:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
	mobile: number;\r
	smallDesktop: number;\r
	desktop: number;\r
	tablet: number;\r
}`,signature:{properties:[{key:"mobile",value:{name:"number",required:!0}},{key:"smallDesktop",value:{name:"number",required:!0}},{key:"desktop",value:{name:"number",required:!0}},{key:"tablet",value:{name:"number",required:!0}}]}},description:""}}};const D={title:"Grid-Masonry/GridMasonry",component:z,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},G=Array.from({length:20}).map((n,t)=>c.jsx("div",{style:{background:"#"+Math.floor(Math.random()*16777215).toString(16)},children:c.jsxs(c.Fragment,{children:[c.jsx("div",{children:t}),"MSMSM SMSS".repeat(Math.floor(Math.random()*160))]})},t)),C={args:{gap:{col:"20px",row:"20px"},col:{smallDesktop:3,desktop:3,mobile:3,tablet:3},children:G}};var k,w,v;C.parameters={...C.parameters,docs:{...(k=C.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {
    gap: {
      col: "20px",
      row: "20px"
    },
    col: {
      smallDesktop: 3,
      desktop: 3,
      mobile: 3,
      tablet: 3
    },
    children: items
  }
}`,...(v=(w=C.parameters)==null?void 0:w.docs)==null?void 0:v.source}}};const H=["Grid3columns"];export{C as Grid3columns,H as __namedExportsOrder,D as default};
